# Merlin AI Router Environment Configuration
# This file contains environment variables for the systemd service

# Service Configuration
# Service mode: Hybrid (default), HttpServer, or CliDaemon
MERLIN_MODE=Hybrid

# HTTP Server Configuration
MERLIN_HTTP_PORT=4242
MERLIN_BIND_ADDRESS=0.0.0.0
MERLIN_ENABLE_METRICS=true

# Logging Configuration
# Rust logging level: error, warn, info, debug, trace
RUST_LOG=info
MERLIN_LOG_LEVEL=Info
MERLIN_ENABLE_STRUCTURED_LOGGING=true

# Paths and Directories
MERLIN_DATA_DIR=/var/lib/merlin
MERLIN_CONFIG_DIR=/etc/merlin
MERLIN_LOG_DIR=/var/log/merlin
MERLIN_RUN_DIR=/run/merlin

# Feature Storage Path
MERLIN_FEATURE_STORAGE_PATH=/var/lib/merlin/features.json

# Redis Configuration (for A/B testing, preferences, metrics)
# Redis connection URL - modify as needed for your setup
REDIS_URL=redis://localhost:6379
REDIS_DATABASE=0

# Redis connection settings
REDIS_CONNECTION_POOL_SIZE=5
REDIS_CONNECTION_TIMEOUT_SECONDS=10
REDIS_MAX_CONNECTIONS=10

# Performance Settings
# Maximum concurrent HTTP connections
MERLIN_MAX_CONNECTIONS=1000

# Tokio runtime configuration
MERLIN_TOKIO_THREADS=4

# Request timeout in seconds
MERLIN_REQUEST_TIMEOUT=30

# Memory limits (MB)
MERLIN_MEMORY_MAX=512
MERLIN_MEMORY_HIGH=256

# Security Settings
# Enable authentication (requires API keys)
MERLIN_ENABLE_AUTHENTICATION=false

# Rate limiting (requests per minute)
MERLIN_RATE_LIMIT_PER_MINUTE=60

# CORS configuration
MERLIN_CORS_ALLOW_ORIGINS=*
MERLIN_CORS_ALLOW_METHODS=GET,POST,PUT,DELETE
MERLIN_CORS_ALLOW_HEADERS=Content-Type,Authorization

# API Keys (set via secure methods, not hardcoded)
# OPENAI_API_KEY=your_openai_api_key_here
# ANTHROPIC_API_KEY=your_anthropic_api_key_here

# SSL/TLS Configuration (when enabled)
MERLIN_SSL_ENABLED=false
MERLIN_SSL_CERT_PATH=/etc/merlin/cert.pem
MERLIN_SSL_KEY_PATH=/etc/merlin/key.pem

# A/B Testing Configuration
MERLIN_ENABLE_AB_TESTING=true
MERLIN_ENABLE_MODEL_SELECTION=true

# Model Selection Configuration
MERLIN_DEFAULT_PROVIDER=openai
MERLIN_ENABLE_CACHING=true
MERLIN_PREFETCH_ENABLED=true

# Preferences Configuration
MERLIN_ENABLE_PREFERENCES=true
MERLIN_PREFERENCES_LEARNING_ENABLED=true
MERLIN_MAX_PREFERENCES_HISTORY=1000

# Feedback Configuration
MERLIN_ENABLE_FEEDBACK=true
MERLIN_FEEDBACK_STORAGE_TYPE=redis

# Metrics Configuration
MERLIN_ENABLE_METRICS_COLLECTION=true
MERLIN_METRICS_PORT=9090
MERLIN_METRICS_ENABLED=true

# Health Check Configuration
MERLIN_HEALTH_CHECK_ENABLED=true
MERLIN_HEALTH_CHECK_INTERVAL_SECONDS=30
MERLIN_HEALTH_CHECK_PORT=4242

# Service Discovery (optional)
MERLIN_DISCOVERY_ENABLED=false
MERLIN_DISCOVERY_SERVICE_NAME=merlin

# Monitoring and Observability
MERLIN_ENABLE_RESOURCE_MONITORING=true
MERLIN_RESOURCE_MONITORING_INTERVAL_SECONDS=60

# Maintenance Configuration
MERLIN_AUTO_CLEANUP_ENABLED=true
MERLIN_CLEANUP_INTERVAL_HOURS=24
MERLIN_LOG_RETENTION_DAYS=30
MERLIN_FEATURE_RETENTION_DAYS=90

# Performance Thresholds (percentages)
MERLIN_MEMORY_WARNING_THRESHOLD=80
MERLIN_MEMORY_CRITICAL_THRESHOLD=95
MERLIN_CPU_WARNING_THRESHOLD=80
MERLIN_CPU_CRITICAL_THRESHOLD=95
MERLIN_DISK_WARNING_THRESHOLD=80
MERLIN_DISK_CRITICAL_THRESHOLD=90

# Development Settings (disable in production)
MERLIN_DEBUG_MODE=false
MERLIN_VERBOSE_LOGGING=false
MERLIN_ENABLE_PROFILING=false
MERLIN_TEST_MODE=false

# Feature Flags (for experimental features)
MERLIN_ENABLE_EXPERIMENTAL_FEATURES=false
MERLIN_ENABLE_DEBUG_ENDPOINTS=false
MERLIN_ENABLE_ADMIN_API=false

# Systemd Integration
# Enable systemd notifications
MERLIN_SYSTEMD_NOTIFY=true

# Watchdog configuration (if enabled)
MERLIN_WATCHDOG_ENABLED=false
MERLIN_WATCHDOG_INTERVAL_SECONDS=30

# Graceful shutdown timeout
MERLIN_GRACEFUL_SHUTDOWN_TIMEOUT_SECONDS=10

# Force kill timeout
MERLIN_FORCE_KILL_TIMEOUT_SECONDS=5

# Network Configuration
MERLIN_ENABLE_IPV6=true
MERLIN_CONNECTION_TIMEOUT_SECONDS=10
MERLIN_READ_TIMEOUT_SECONDS=30
MERLIN_WRITE_TIMEOUT_SECONDS=30

# Cache Configuration
MERLIN_CACHE_ENABLED=true
MERLIN_CACHE_SIZE_MB=64
MERLIN_CACHE_TTL_MINUTES=30

# Backup Configuration
MERLIN_BACKUP_ENABLED=true
MERLIN_BACKUP_INTERVAL_HOURS=24
MERLIN_MAX_BACKUPS=7

# Integration Settings
# External service integrations
MERLIN_LOG_TO_EXTERNAL_SERVICE=false
MERLIN_EXTERNAL_LOG_ENDPOINT=

# Upgrade Configuration
MERLIN_AUTO_UPGRADE_ENABLED=false
MERLIN_UPGRADE_CHECK_INTERVAL_HOURS=24
MERLIN_BACKUP_BEFORE_UPGRADE=true
MERLIN_AUTO_ROLLBACK_ENABLED=false
MERLIN_ROLLBACK_TIMEOUT_MINUTES=30

# Compatibility Settings
MERLIN_MIN_COMPATIBLE_VERSION=0.1.0
MERLIN_MAX_COMPATIBLE_VERSION=0.2.0